{{template "base" .}}

{{define "title"}}Profile - Aletheia{{end}}

{{define "content"}}
<div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8">
  {{/* Breadcrumb */}}
  {{template "breadcrumb" (dict
    "Items" (slice
      (dict "Label" "Dashboard" "URL" "/dashboard")
      (dict "Label" "Profile" "URL" "")
    )
  )}}

  {{template "page-header" (dict
    "Title" "My Profile"
    "Description" "Manage your account information and settings"
  )}}

  <div class="px-gutter pb-16">
    <div class="mx-auto max-w-3xl space-y-8">
      <!-- Account Information Card -->
      <div class="rounded-3xl bg-white p-8 shadow-lg ring-1 ring-zinc-950/5 dark:bg-zinc-900 dark:ring-white/10">
        <h2 class="text-lg/7 font-semibold text-zinc-950 dark:text-white">
          Account Information
        </h2>

        <div class="mt-6 space-y-6">
          <!-- Email -->
          <div>
            <dt class="text-sm/6 font-medium text-zinc-950 dark:text-white">Email</dt>
            <dd class="mt-1 text-sm/6 text-zinc-600 dark:text-zinc-400">{{.Profile.Email}}</dd>
            <p class="mt-1 text-xs/5 text-zinc-500 dark:text-zinc-500">Email cannot be changed</p>
          </div>

          <!-- Username -->
          <div>
            <dt class="text-sm/6 font-medium text-zinc-950 dark:text-white">Username</dt>
            <dd class="mt-1 text-sm/6 text-zinc-600 dark:text-zinc-400">{{.Profile.Username}}</dd>
            <p class="mt-1 text-xs/5 text-zinc-500 dark:text-zinc-500">Username cannot be changed</p>
          </div>

          <!-- Account Status -->
          <div>
            <dt class="text-sm/6 font-medium text-zinc-950 dark:text-white">Account Status</dt>
            <dd class="mt-1">
              {{if eq .Profile.Status "active"}}
                {{template "badge" (dict "Content" "Active" "Color" "green")}}
              {{else if eq .Profile.Status "pending"}}
                {{template "badge" (dict "Content" "Pending Verification" "Color" "orange")}}
              {{else}}
                {{template "badge" (dict "Content" .Profile.Status "Color" "red")}}
              {{end}}
            </dd>
          </div>

          <!-- Member Since -->
          <div>
            <dt class="text-sm/6 font-medium text-zinc-950 dark:text-white">Member Since</dt>
            <dd class="mt-1 text-sm/6 text-zinc-600 dark:text-zinc-400">{{.Profile.CreatedAt.Time.Format "January 2, 2006"}}</dd>
          </div>
        </div>

        <!-- Divider -->
        {{template "divider" (dict "Class" "my-8")}}

        <!-- Update Profile Form -->
        <h3 class="text-base/7 font-semibold text-zinc-950 dark:text-white">
          Update Profile
        </h3>

        <form
          hx-put="/api/auth/profile"
          hx-target="#profile-form"
          hx-swap="outerHTML"
          id="profile-form"
          class="mt-6 space-y-6">

          <!-- First Name -->
          <div class="space-y-1">
            <label for="first_name" class="text-base/6 text-zinc-950 sm:text-sm/6 dark:text-white font-medium">
              First Name
            </label>
            {{if .Profile.FirstName.Valid}}
              {{template "input" (dict
                "Type" "text"
                "Name" "first_name"
                "ID" "first_name"
                "Value" .Profile.FirstName.String
                "Placeholder" "Your first name"
              )}}
            {{else}}
              {{template "input" (dict
                "Type" "text"
                "Name" "first_name"
                "ID" "first_name"
                "Placeholder" "Your first name"
              )}}
            {{end}}
          </div>

          <!-- Last Name -->
          <div class="space-y-1">
            <label for="last_name" class="text-base/6 text-zinc-950 sm:text-sm/6 dark:text-white font-medium">
              Last Name
            </label>
            {{if .Profile.LastName.Valid}}
              {{template "input" (dict
                "Type" "text"
                "Name" "last_name"
                "ID" "last_name"
                "Value" .Profile.LastName.String
                "Placeholder" "Your last name"
              )}}
            {{else}}
              {{template "input" (dict
                "Type" "text"
                "Name" "last_name"
                "ID" "last_name"
                "Placeholder" "Your last name"
              )}}
            {{end}}
          </div>

          <!-- Submit Button -->
          <div class="pt-4">
            {{template "button" (dict
              "Type" "submit"
              "Content" "Save Changes"
              "Variant" "solid"
              "Color" "blue"
            )}}
          </div>
        </form>
      </div>

      <!-- Security Card -->
      <div class="rounded-3xl bg-white p-8 shadow-lg ring-1 ring-zinc-950/5 dark:bg-zinc-900 dark:ring-white/10">
        <h2 class="text-lg/7 font-semibold text-zinc-950 dark:text-white">
          Security
        </h2>
        <p class="mt-2 text-sm/6 text-zinc-600 dark:text-zinc-400">
          Change your password or manage account security settings.
        </p>
        <div class="mt-6">
          <a href="/profile/security">
            {{template "button" (dict
              "Content" "Security Settings"
              "Variant" "outline"
            )}}
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
{{end}}
