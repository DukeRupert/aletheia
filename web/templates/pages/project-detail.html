{{template "base" .}}

{{define "title"}}{{.Project.Name}} - Aletheia{{end}}

{{define "content"}}
<div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8">
  {{/* Breadcrumb */}}
  {{template "breadcrumb" (dict
    "Items" (slice
      (dict "Label" "Dashboard" "URL" "/dashboard")
      (dict "Label" "Projects" "URL" "/projects")
      (dict "Label" .Project.Name "URL" "")
    )
  )}}

  {{template "page-header" (dict
    "Title" .Project.Name
    "Description" "Manage project details and inspections"
    "Action" (dict "Content" "Back to Projects" "Href" "/projects" "Variant" "outline")
  )}}

  <div class="px-gutter pb-16">
    <div class="mx-auto max-w-4xl space-y-8">
      <!-- Project Details Card -->
      <div class="rounded-3xl bg-white p-8 shadow-lg ring-1 ring-zinc-950/5 dark:bg-zinc-900 dark:ring-white/10">
        <h2 class="text-lg/7 font-semibold text-zinc-950 dark:text-white">
          Project Details
        </h2>

        <form
          hx-put="/api/projects/{{.Project.ID}}"
          hx-target="#project-form"
          hx-swap="outerHTML"
          id="project-form"
          class="mt-6 space-y-6">

          <!-- Project Name -->
          <div class="space-y-1">
            <label for="name" class="text-base/6 text-zinc-950 sm:text-sm/6 dark:text-white font-medium">
              Project Name <span class="text-red-500">*</span>
            </label>
            {{template "input" (dict
              "Type" "text"
              "Name" "name"
              "ID" "name"
              "Required" true
              "Value" .Project.Name
              "Placeholder" "e.g., Main Street Construction"
            )}}
          </div>

          <!-- Description -->
          <div class="space-y-1">
            <label for="description" class="text-base/6 text-zinc-950 sm:text-sm/6 dark:text-white font-medium">
              Description
            </label>
            {{if .Project.Description.Valid}}
              {{template "textarea" (dict
                "Name" "description"
                "ID" "description"
                "Rows" 4
                "Value" .Project.Description.String
                "Placeholder" "Describe the project..."
              )}}
            {{else}}
              {{template "textarea" (dict
                "Name" "description"
                "ID" "description"
                "Rows" 4
                "Placeholder" "Describe the project..."
              )}}
            {{end}}
          </div>

          <!-- Project Type and Status Grid -->
          <div class="grid gap-6 sm:grid-cols-2">
            <!-- Project Type -->
            <div class="space-y-1">
              <label for="project_type" class="text-base/6 text-zinc-950 sm:text-sm/6 dark:text-white font-medium">
                Project Type
              </label>
              <select name="project_type" id="project_type"
                      class="relative block w-full appearance-none rounded-lg border
                             px-[calc(theme(spacing.3.5)-1px)] py-[calc(theme(spacing.2.5)-1px)]
                             sm:px-[calc(theme(spacing.3)-1px)] sm:py-[calc(theme(spacing.1.5)-1px)]
                             text-base/6 text-zinc-950 sm:text-sm/6
                             border-zinc-950/10 hover:border-zinc-950/20
                             dark:border-white/10 dark:text-white dark:hover:border-white/20
                             bg-white dark:bg-white/5
                             focus:outline focus:outline-2 focus:-outline-offset-1 focus:outline-blue-500">
                <option value="">Select type</option>
                <option value="Commercial" {{if and .Project.ProjectType.Valid (eq .Project.ProjectType.String "Commercial")}}selected{{end}}>Commercial</option>
                <option value="Residential" {{if and .Project.ProjectType.Valid (eq .Project.ProjectType.String "Residential")}}selected{{end}}>Residential</option>
                <option value="Industrial" {{if and .Project.ProjectType.Valid (eq .Project.ProjectType.String "Industrial")}}selected{{end}}>Industrial</option>
                <option value="Infrastructure" {{if and .Project.ProjectType.Valid (eq .Project.ProjectType.String "Infrastructure")}}selected{{end}}>Infrastructure</option>
                <option value="Other" {{if and .Project.ProjectType.Valid (eq .Project.ProjectType.String "Other")}}selected{{end}}>Other</option>
              </select>
            </div>

            <!-- Status -->
            <div class="space-y-1">
              <label for="status" class="text-base/6 text-zinc-950 sm:text-sm/6 dark:text-white font-medium">
                Status
              </label>
              <select name="status" id="status"
                      class="relative block w-full appearance-none rounded-lg border
                             px-[calc(theme(spacing.3.5)-1px)] py-[calc(theme(spacing.2.5)-1px)]
                             sm:px-[calc(theme(spacing.3)-1px)] sm:py-[calc(theme(spacing.1.5)-1px)]
                             text-base/6 text-zinc-950 sm:text-sm/6
                             border-zinc-950/10 hover:border-zinc-950/20
                             dark:border-white/10 dark:text-white dark:hover:border-white/20
                             bg-white dark:bg-white/5
                             focus:outline focus:outline-2 focus:-outline-offset-1 focus:outline-blue-500">
                <option value="active" {{if and .Project.Status.Valid (eq .Project.Status.String "active")}}selected{{end}}>Active</option>
                <option value="on_hold" {{if and .Project.Status.Valid (eq .Project.Status.String "on_hold")}}selected{{end}}>On Hold</option>
                <option value="completed" {{if and .Project.Status.Valid (eq .Project.Status.String "completed")}}selected{{end}}>Completed</option>
              </select>
            </div>
          </div>

          <!-- Location Section Divider -->
          {{template "divider" (dict "Class" "my-8")}}

          <div>
            <h3 class="text-base/7 font-semibold text-zinc-950 dark:text-white">
              Location Information
            </h3>
            <p class="mt-1 text-sm/6 text-zinc-600 dark:text-zinc-400">
              The project location helps determine applicable state safety codes for AI photo analysis.
            </p>
          </div>

          <!-- Street Address -->
          <div class="space-y-1">
            <label for="address" class="text-base/6 text-zinc-950 sm:text-sm/6 dark:text-white font-medium">
              Street Address
            </label>
            {{if .Project.Address.Valid}}
              {{template "input" (dict
                "Type" "text"
                "Name" "address"
                "ID" "address"
                "Value" .Project.Address.String
                "Placeholder" "e.g., 123 Main Street"
              )}}
            {{else}}
              {{template "input" (dict
                "Type" "text"
                "Name" "address"
                "ID" "address"
                "Placeholder" "e.g., 123 Main Street"
              )}}
            {{end}}
          </div>

          <!-- City and State Grid -->
          <div class="grid gap-6 sm:grid-cols-3">
            <!-- City -->
            <div class="space-y-1 sm:col-span-2">
              <label for="city" class="text-base/6 text-zinc-950 sm:text-sm/6 dark:text-white font-medium">
                City
              </label>
              {{if .Project.City.Valid}}
                {{template "input" (dict
                  "Type" "text"
                  "Name" "city"
                  "ID" "city"
                  "Value" .Project.City.String
                  "Placeholder" "e.g., San Francisco"
                )}}
              {{else}}
                {{template "input" (dict
                  "Type" "text"
                  "Name" "city"
                  "ID" "city"
                  "Placeholder" "e.g., San Francisco"
                )}}
              {{end}}
            </div>

            <!-- State -->
            <div class="space-y-1">
              <label for="state" class="text-base/6 text-zinc-950 sm:text-sm/6 dark:text-white font-medium">
                State <span class="text-red-500">*</span>
              </label>
              <select name="state" id="state" required
                      class="relative block w-full appearance-none rounded-lg border
                             px-[calc(theme(spacing.3.5)-1px)] py-[calc(theme(spacing.2.5)-1px)]
                             sm:px-[calc(theme(spacing.3)-1px)] sm:py-[calc(theme(spacing.1.5)-1px)]
                             text-base/6 text-zinc-950 sm:text-sm/6
                             border-zinc-950/10 hover:border-zinc-950/20
                             dark:border-white/10 dark:text-white dark:hover:border-white/20
                             bg-white dark:bg-white/5
                             focus:outline focus:outline-2 focus:-outline-offset-1 focus:outline-blue-500">
                <option value="">Select</option>
                <option value="AL" {{if and .Project.State.Valid (eq .Project.State.String "AL")}}selected{{end}}>AL</option>
                <option value="AK" {{if and .Project.State.Valid (eq .Project.State.String "AK")}}selected{{end}}>AK</option>
                <option value="AZ" {{if and .Project.State.Valid (eq .Project.State.String "AZ")}}selected{{end}}>AZ</option>
                <option value="AR" {{if and .Project.State.Valid (eq .Project.State.String "AR")}}selected{{end}}>AR</option>
                <option value="CA" {{if and .Project.State.Valid (eq .Project.State.String "CA")}}selected{{end}}>CA</option>
                <option value="CO" {{if and .Project.State.Valid (eq .Project.State.String "CO")}}selected{{end}}>CO</option>
                <option value="CT" {{if and .Project.State.Valid (eq .Project.State.String "CT")}}selected{{end}}>CT</option>
                <option value="DE" {{if and .Project.State.Valid (eq .Project.State.String "DE")}}selected{{end}}>DE</option>
                <option value="FL" {{if and .Project.State.Valid (eq .Project.State.String "FL")}}selected{{end}}>FL</option>
                <option value="GA" {{if and .Project.State.Valid (eq .Project.State.String "GA")}}selected{{end}}>GA</option>
                <option value="HI" {{if and .Project.State.Valid (eq .Project.State.String "HI")}}selected{{end}}>HI</option>
                <option value="ID" {{if and .Project.State.Valid (eq .Project.State.String "ID")}}selected{{end}}>ID</option>
                <option value="IL" {{if and .Project.State.Valid (eq .Project.State.String "IL")}}selected{{end}}>IL</option>
                <option value="IN" {{if and .Project.State.Valid (eq .Project.State.String "IN")}}selected{{end}}>IN</option>
                <option value="IA" {{if and .Project.State.Valid (eq .Project.State.String "IA")}}selected{{end}}>IA</option>
                <option value="KS" {{if and .Project.State.Valid (eq .Project.State.String "KS")}}selected{{end}}>KS</option>
                <option value="KY" {{if and .Project.State.Valid (eq .Project.State.String "KY")}}selected{{end}}>KY</option>
                <option value="LA" {{if and .Project.State.Valid (eq .Project.State.String "LA")}}selected{{end}}>LA</option>
                <option value="ME" {{if and .Project.State.Valid (eq .Project.State.String "ME")}}selected{{end}}>ME</option>
                <option value="MD" {{if and .Project.State.Valid (eq .Project.State.String "MD")}}selected{{end}}>MD</option>
                <option value="MA" {{if and .Project.State.Valid (eq .Project.State.String "MA")}}selected{{end}}>MA</option>
                <option value="MI" {{if and .Project.State.Valid (eq .Project.State.String "MI")}}selected{{end}}>MI</option>
                <option value="MN" {{if and .Project.State.Valid (eq .Project.State.String "MN")}}selected{{end}}>MN</option>
                <option value="MS" {{if and .Project.State.Valid (eq .Project.State.String "MS")}}selected{{end}}>MS</option>
                <option value="MO" {{if and .Project.State.Valid (eq .Project.State.String "MO")}}selected{{end}}>MO</option>
                <option value="MT" {{if and .Project.State.Valid (eq .Project.State.String "MT")}}selected{{end}}>MT</option>
                <option value="NE" {{if and .Project.State.Valid (eq .Project.State.String "NE")}}selected{{end}}>NE</option>
                <option value="NV" {{if and .Project.State.Valid (eq .Project.State.String "NV")}}selected{{end}}>NV</option>
                <option value="NH" {{if and .Project.State.Valid (eq .Project.State.String "NH")}}selected{{end}}>NH</option>
                <option value="NJ" {{if and .Project.State.Valid (eq .Project.State.String "NJ")}}selected{{end}}>NJ</option>
                <option value="NM" {{if and .Project.State.Valid (eq .Project.State.String "NM")}}selected{{end}}>NM</option>
                <option value="NY" {{if and .Project.State.Valid (eq .Project.State.String "NY")}}selected{{end}}>NY</option>
                <option value="NC" {{if and .Project.State.Valid (eq .Project.State.String "NC")}}selected{{end}}>NC</option>
                <option value="ND" {{if and .Project.State.Valid (eq .Project.State.String "ND")}}selected{{end}}>ND</option>
                <option value="OH" {{if and .Project.State.Valid (eq .Project.State.String "OH")}}selected{{end}}>OH</option>
                <option value="OK" {{if and .Project.State.Valid (eq .Project.State.String "OK")}}selected{{end}}>OK</option>
                <option value="OR" {{if and .Project.State.Valid (eq .Project.State.String "OR")}}selected{{end}}>OR</option>
                <option value="PA" {{if and .Project.State.Valid (eq .Project.State.String "PA")}}selected{{end}}>PA</option>
                <option value="RI" {{if and .Project.State.Valid (eq .Project.State.String "RI")}}selected{{end}}>RI</option>
                <option value="SC" {{if and .Project.State.Valid (eq .Project.State.String "SC")}}selected{{end}}>SC</option>
                <option value="SD" {{if and .Project.State.Valid (eq .Project.State.String "SD")}}selected{{end}}>SD</option>
                <option value="TN" {{if and .Project.State.Valid (eq .Project.State.String "TN")}}selected{{end}}>TN</option>
                <option value="TX" {{if and .Project.State.Valid (eq .Project.State.String "TX")}}selected{{end}}>TX</option>
                <option value="UT" {{if and .Project.State.Valid (eq .Project.State.String "UT")}}selected{{end}}>UT</option>
                <option value="VT" {{if and .Project.State.Valid (eq .Project.State.String "VT")}}selected{{end}}>VT</option>
                <option value="VA" {{if and .Project.State.Valid (eq .Project.State.String "VA")}}selected{{end}}>VA</option>
                <option value="WA" {{if and .Project.State.Valid (eq .Project.State.String "WA")}}selected{{end}}>WA</option>
                <option value="WV" {{if and .Project.State.Valid (eq .Project.State.String "WV")}}selected{{end}}>WV</option>
                <option value="WI" {{if and .Project.State.Valid (eq .Project.State.String "WI")}}selected{{end}}>WI</option>
                <option value="WY" {{if and .Project.State.Valid (eq .Project.State.String "WY")}}selected{{end}}>WY</option>
              </select>
              <p class="mt-1 text-xs/5 text-zinc-500 dark:text-zinc-500">Required for safety codes</p>
            </div>
          </div>

          <!-- ZIP Code -->
          <div class="space-y-1">
            <label for="zip_code" class="text-base/6 text-zinc-950 sm:text-sm/6 dark:text-white font-medium">
              ZIP Code
            </label>
            {{if .Project.ZipCode.Valid}}
              {{template "input" (dict
                "Type" "text"
                "Name" "zip_code"
                "ID" "zip_code"
                "Value" .Project.ZipCode.String
                "Placeholder" "e.g., 94102"
              )}}
            {{else}}
              {{template "input" (dict
                "Type" "text"
                "Name" "zip_code"
                "ID" "zip_code"
                "Placeholder" "e.g., 94102"
              )}}
            {{end}}
          </div>

          <!-- Actions -->
          <div class="flex gap-4 pt-4">
            {{template "button" (dict
              "Type" "submit"
              "Content" "Save Changes"
              "Variant" "solid"
              "Color" "blue"
            )}}
            <a href="/projects">
              {{template "button" (dict
                "Content" "Cancel"
                "Variant" "outline"
              )}}
            </a>
          </div>
        </form>
      </div>

      <!-- Inspections Card -->
      <div class="rounded-3xl bg-white p-8 shadow-lg ring-1 ring-zinc-950/5 dark:bg-zinc-900 dark:ring-white/10">
        <h2 class="text-lg/7 font-semibold text-zinc-950 dark:text-white">
          Inspections
        </h2>
        <p class="mt-2 text-sm/6 text-zinc-600 dark:text-zinc-400">
          View and manage safety inspections for this project.
        </p>
        <div class="mt-6">
          <a href="/projects/{{.Project.ID}}/inspections">
            {{template "button" (dict
              "Content" "View Inspections"
              "Variant" "solid"
              "Color" "blue"
            )}}
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
{{end}}
