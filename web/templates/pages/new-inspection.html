{{template "base" .}}

{{define "title"}}New Inspection - {{.Project.Name}} - Aletheia{{end}}

{{define "content"}}
<div class="mx-auto max-w-7xl">
  {{template "page-header" (dict
    "Title" "Create Inspection"
    "Description" (printf "New safety inspection for %s" .Project.Name)
  )}}

  <div class="px-gutter pb-16">
    <div class="mx-auto max-w-2xl">
      <form
        hx-post="/api/inspections"
        hx-target="#inspection-form"
        hx-swap="outerHTML"
        id="inspection-form"
        class="rounded-3xl bg-white p-8 shadow-lg ring-1 ring-zinc-950/5 dark:bg-zinc-900 dark:ring-white/10">

        <input type="hidden" name="project_id" value="{{.Project.ID}}">

        <!-- Project Info Box -->
        <div class="rounded-lg bg-zinc-100 p-4 dark:bg-zinc-800 mb-6">
          <dl class="space-y-2">
            <div>
              <dt class="text-sm font-medium text-zinc-500 dark:text-zinc-400">Project</dt>
              <dd class="mt-1 text-sm text-zinc-950 dark:text-white">{{.Project.Name}}</dd>
            </div>
            {{if .Project.Address.Valid}}
              <div>
                <dt class="text-sm font-medium text-zinc-500 dark:text-zinc-400">Location</dt>
                <dd class="mt-1 text-sm text-zinc-950 dark:text-white">
                  {{.Project.Address.String}}{{if .Project.City.Valid}}, {{.Project.City.String}}{{end}}{{if .Project.State.Valid}}, {{.Project.State.String}}{{end}}
                </dd>
              </div>
            {{end}}
          </dl>
        </div>

        <!-- Info Alert -->
        {{template "alert" (dict
          "Type" "info"
          "Content" "The inspection will be created in draft status. You can upload photos and the system will analyze them for safety violations."
          "Class" "mb-6"
        )}}

        <!-- Actions -->
        <div class="flex gap-4">
          {{template "button" (dict
            "Type" "submit"
            "Content" "Create Inspection"
            "Variant" "solid"
            "Color" "blue"
          )}}
          <a href="/projects/{{.Project.ID}}/inspections">
            {{template "button" (dict
              "Content" "Cancel"
              "Variant" "outline"
            )}}
          </a>
        </div>
      </form>
    </div>
  </div>
</div>
{{end}}
