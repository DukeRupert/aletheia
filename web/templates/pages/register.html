{{template "base" .}}

{{define "title"}}Create Account - Aletheia{{end}}

{{define "content"}}
<div class="flex min-h-screen items-center justify-center px-4 py-12 bg-zinc-50 dark:bg-zinc-950">
  <div class="w-full max-w-md">
    <!-- Logo -->
    <div class="flex justify-center mb-8">
      <a href="/" class="text-2xl font-bold text-zinc-950 dark:text-white">
        Aletheia
      </a>
    </div>

    <!-- Card -->
    <div class="rounded-3xl bg-white p-8 shadow-lg ring-1 ring-zinc-950/5 dark:bg-zinc-900 dark:ring-white/10">
      <h1 class="text-2xl/8 font-semibold text-zinc-950 dark:text-white">
        Create Account
      </h1>
      <p class="mt-2 text-sm/6 text-zinc-500 dark:text-zinc-400">
        Sign up for Aletheia to start safety inspections.
      </p>

      <form hx-post="/api/auth/register"
            hx-target="#register-form"
            hx-swap="outerHTML"
            id="register-form"
            class="mt-8 space-y-6">

        <!-- Name field -->
        <div class="space-y-1">
          <label for="name" class="text-base/6 text-zinc-950 sm:text-sm/6 dark:text-white font-medium">
            Full Name
          </label>
          {{template "input" (dict
            "Type" "text"
            "Name" "name"
            "ID" "name"
            "Required" true
            "Autofocus" true
            "Placeholder" "John Doe"
            "Value" (index .Values "name")
            "Error" (index .Errors "name")
          )}}
          {{if index .Errors "name"}}
            {{template "field-error" (dict "ID" "name-error" "Message" (index .Errors "name"))}}
          {{end}}
        </div>

        <!-- Username field -->
        <div class="space-y-1">
          <label for="username" class="text-base/6 text-zinc-950 sm:text-sm/6 dark:text-white font-medium">
            Username
          </label>
          {{template "input" (dict
            "Type" "text"
            "Name" "username"
            "ID" "username"
            "Required" true
            "Placeholder" "johndoe"
            "Value" (index .Values "username")
            "Error" (index .Errors "username")
          )}}
          {{if index .Errors "username"}}
            {{template "field-error" (dict "ID" "username-error" "Message" (index .Errors "username"))}}
          {{else}}
            <p class="text-base/6 text-zinc-500 sm:text-sm/6 dark:text-zinc-400">
              Choose a unique username
            </p>
          {{end}}
        </div>

        <!-- Email field -->
        <div class="space-y-1">
          <label for="email" class="text-base/6 text-zinc-950 sm:text-sm/6 dark:text-white font-medium">
            Email
          </label>
          {{template "input" (dict
            "Type" "email"
            "Name" "email"
            "ID" "email"
            "Required" true
            "Placeholder" "you@example.com"
            "Value" (index .Values "email")
            "Error" (index .Errors "email")
          )}}
          {{if index .Errors "email"}}
            {{template "field-error" (dict "ID" "email-error" "Message" (index .Errors "email"))}}
          {{end}}
        </div>

        <!-- Password field -->
        <div class="space-y-1">
          <label for="password" class="text-base/6 text-zinc-950 sm:text-sm/6 dark:text-white font-medium">
            Password
          </label>
          {{template "input" (dict
            "Type" "password"
            "Name" "password"
            "ID" "password"
            "Required" true
            "Minlength" 8
            "Pattern" "^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d).{8,}$"
            "Title" "Password must be at least 8 characters and contain: uppercase letter, lowercase letter, and number"
            "Placeholder" "Create a strong password"
            "Error" (index .Errors "password")
          )}}
          {{if index .Errors "password"}}
            {{template "field-error" (dict "ID" "password-error" "Message" (index .Errors "password"))}}
          {{else}}
            <p class="text-base/6 text-zinc-500 sm:text-sm/6 dark:text-zinc-400">
              Must be at least 8 characters with uppercase, lowercase, and number
            </p>
          {{end}}
        </div>

        <!-- General error message -->
        {{if index .Errors "general"}}
          <div class="rounded-lg bg-red-50 border border-red-200 p-4 dark:bg-red-950/20 dark:border-red-900/50">
            {{template "field-error" (dict "ID" "general-error" "Message" (index .Errors "general"))}}
          </div>
        {{end}}

        <!-- Submit button -->
        {{template "button" (dict "Type" "submit" "Content" "Create Account" "Variant" "solid" "Color" "blue" "Class" "w-full")}}
      </form>

      <!-- Divider -->
      {{template "divider" (dict "Class" "my-8")}}

      <!-- Sign in link -->
      <div class="text-center text-sm/6 text-zinc-500 dark:text-zinc-400">
        Already have an account?
        <a href="/login"
           class="font-medium text-zinc-950 hover:text-zinc-700 dark:text-white dark:hover:text-zinc-300">
          Sign in
        </a>
      </div>
    </div>
  </div>
</div>
{{end}}
