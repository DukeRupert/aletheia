{{/*
  Skeleton Loader Component - Catalyst UI Kit Style

  Usage:
    {{template "skeleton" (dict "Type" "text" "Lines" 3)}}
    {{template "skeleton" (dict "Type" "card")}}
    {{template "skeleton" (dict "Type" "table" "Rows" 5)}}

  Parameters:
    - Type: text, card, avatar, image, table, custom (default: "text")
    - Lines: Number of text lines (default: 3)
    - Rows: Number of table rows (default: 5)
    - Width: Custom width class (e.g., "w-1/2")
    - Height: Custom height class (e.g., "h-64")
    - Class: Additional CSS classes

  Types:
    - text: Multiple text lines with varying widths
    - card: Card-shaped skeleton
    - avatar: Circular avatar skeleton
    - image: Image placeholder
    - table: Table with header and rows
    - custom: Single bar with custom dimensions
*/}}

{{define "skeleton"}}
{{$type := or .Type "text"}}

{{if eq $type "text"}}
  {{template "skeleton-text" .}}
{{else if eq $type "card"}}
  {{template "skeleton-card" .}}
{{else if eq $type "avatar"}}
  {{template "skeleton-avatar" .}}
{{else if eq $type "image"}}
  {{template "skeleton-image" .}}
{{else if eq $type "table"}}
  {{template "skeleton-table" .}}
{{else if eq $type "custom"}}
  {{template "skeleton-bar" .}}
{{end}}
{{end}}

{{/* Base skeleton bar */}}
{{define "skeleton-bar"}}
<div class="{{template "skeleton-base-classes" .}} {{.Width}} {{.Height}} {{.Class}}"></div>
{{end}}

{{define "skeleton-base-classes"}}
animate-pulse rounded bg-zinc-200 dark:bg-zinc-700
{{end}}

{{/* Text skeleton - multiple lines */}}
{{define "skeleton-text"}}
{{$lines := or .Lines 3}}
<div class="space-y-3 {{.Class}}">
  {{range $i := iterate $lines}}
    {{if eq $i 0}}
      <div class="{{template "skeleton-base-classes" .}} h-4 w-3/4"></div>
    {{else if eq $i (sub $lines 1)}}
      <div class="{{template "skeleton-base-classes" .}} h-4 w-5/6"></div>
    {{else}}
      <div class="{{template "skeleton-base-classes" .}} h-4"></div>
    {{end}}
  {{end}}
</div>
{{end}}

{{/* Card skeleton */}}
{{define "skeleton-card"}}
<div class="rounded-2xl bg-white p-6 ring-1 ring-zinc-950/5
            dark:bg-zinc-900 dark:ring-white/10 {{.Class}}">
  <div class="animate-pulse space-y-4">
    <!-- Title -->
    <div class="h-6 bg-zinc-200 rounded dark:bg-zinc-700 w-2/3"></div>

    <!-- Description lines -->
    <div class="space-y-3">
      <div class="h-4 bg-zinc-200 rounded dark:bg-zinc-700"></div>
      <div class="h-4 bg-zinc-200 rounded dark:bg-zinc-700 w-5/6"></div>
    </div>

    <!-- Footer -->
    <div class="flex gap-4 pt-4">
      <div class="h-4 bg-zinc-200 rounded dark:bg-zinc-700 w-20"></div>
      <div class="h-4 bg-zinc-200 rounded dark:bg-zinc-700 w-24"></div>
    </div>
  </div>
</div>
{{end}}

{{/* Avatar skeleton */}}
{{define "skeleton-avatar"}}
{{$size := or .Size "md"}}
<div class="{{template "skeleton-base-classes" .}} rounded-full shrink-0
            {{if eq $size "xs"}}size-6
            {{else if eq $size "sm"}}size-8
            {{else if eq $size "lg"}}size-12
            {{else if eq $size "xl"}}size-16
            {{else}}size-10{{end}}
            {{.Class}}"></div>
{{end}}

{{/* Image skeleton */}}
{{define "skeleton-image"}}
<div class="{{template "skeleton-base-classes" .}} aspect-video w-full {{.Class}}">
  <div class="flex items-center justify-center h-full">
    <svg class="size-12 text-zinc-400 dark:text-zinc-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
    </svg>
  </div>
</div>
{{end}}

{{/* Table skeleton */}}
{{define "skeleton-table"}}
{{$rows := or .Rows 5}}
<div class="animate-pulse space-y-4 {{.Class}}">
  <!-- Table header -->
  <div class="flex gap-4 pb-4 border-b border-zinc-950/5 dark:border-white/5">
    <div class="h-4 bg-zinc-200 rounded dark:bg-zinc-700 w-1/4"></div>
    <div class="h-4 bg-zinc-200 rounded dark:bg-zinc-700 w-1/4"></div>
    <div class="h-4 bg-zinc-200 rounded dark:bg-zinc-700 w-1/6"></div>
    <div class="h-4 bg-zinc-200 rounded dark:bg-zinc-700 w-1/6"></div>
  </div>

  <!-- Table rows -->
  {{range iterate $rows}}
    <div class="flex gap-4 py-3">
      <div class="h-4 bg-zinc-200 rounded dark:bg-zinc-700 w-1/4"></div>
      <div class="h-4 bg-zinc-200 rounded dark:bg-zinc-700 w-1/4"></div>
      <div class="h-4 bg-zinc-200 rounded dark:bg-zinc-700 w-1/6"></div>
      <div class="h-4 bg-zinc-200 rounded dark:bg-zinc-700 w-1/6"></div>
    </div>
  {{end}}
</div>
{{end}}

{{/*
  Photo Gallery Skeleton

  Usage:
    {{template "skeleton-gallery" (dict "Count" 6)}}
*/}}
{{define "skeleton-gallery"}}
{{$count := or .Count 6}}
<div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
  {{range iterate $count}}
    <div class="rounded-2xl bg-white overflow-hidden ring-1 ring-zinc-950/5
                dark:bg-zinc-900 dark:ring-white/10">
      <div class="animate-pulse">
        <!-- Image -->
        <div class="aspect-square bg-zinc-200 dark:bg-zinc-700"></div>

        <!-- Info -->
        <div class="p-4 space-y-3">
          <div class="h-4 bg-zinc-200 rounded dark:bg-zinc-700 w-2/3"></div>
          <div class="h-4 bg-zinc-200 rounded dark:bg-zinc-700 w-1/3"></div>
        </div>
      </div>
    </div>
  {{end}}
</div>
{{end}}
